#!/bin/bash
# Pre-commit hook for CLAUDE.md rules checking
# CLAUDE.md 규칙 자동 체크 Git Hook

echo "🔍 Running CLAUDE.md rules check before commit..."

# Check if check-rules.py exists
if [ ! -f "check-rules.py" ]; then
    echo "⚠️ Warning: check-rules.py not found, skipping rules check"
    exit 0
fi

# Run rules check
python3 check-rules.py

# Check exit status
if [ $? -ne 0 ]; then
    echo ""
    echo "❌ Commit blocked: Rules violations detected!"
    echo "💡 Please fix the violations before committing."
    echo ""
    echo "To bypass this check (NOT RECOMMENDED):"
    echo "  git commit --no-verify"
    echo ""
    exit 1
fi

echo "✅ Rules check passed, proceeding with commit..."
exit 0