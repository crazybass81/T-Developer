# ==========================================
#   T-Developer v2 Environment Configuration
# ==========================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# ------------------------------------------
# Core Settings
# ------------------------------------------
ENVIRONMENT=development
SERVICE_NAME=t-developer-v2
SERVICE_VERSION=2.0.0
DEBUG=false

# ------------------------------------------
# AWS Configuration
# ------------------------------------------
AWS_REGION=us-east-1
AWS_PROFILE=default
AWS_ACCOUNT_ID=
GITHUB_ACTIONS_ROLE_ARN=arn:aws:iam::${AWS_ACCOUNT_ID}:role/github-actions-t-developer

# ------------------------------------------
# Amazon Bedrock
# ------------------------------------------
BEDROCK_AGENT_ID=
BEDROCK_AGENT_ALIAS_ID=
BEDROCK_MODEL_ID=anthropic.claude-3-5-sonnet-20241022-v2:0
BEDROCK_RUNTIME_ENDPOINT=https://bedrock-runtime.${AWS_REGION}.amazonaws.com

# ------------------------------------------
# Claude Code & MCP
# ------------------------------------------
ANTHROPIC_API_KEY=
CLAUDE_CODE_MODE=headless
MCP_SERVER_HOST=localhost
MCP_SERVER_PORT=3333
MCP_FILESYSTEM_ENABLED=true
MCP_GIT_ENABLED=true
MCP_GITHUB_ENABLED=true
MCP_GITHUB_TOKEN=
MCP_TOOLS_DIR=./packages/mcp/tools
MCP_SECURITY_TOKEN=

# ------------------------------------------
# Agent Squad Orchestration
# ------------------------------------------
AGENT_SQUAD_QUEUE_URL=https://sqs.${AWS_REGION}.amazonaws.com/${AWS_ACCOUNT_ID}/agent-squad-tasks
AGENT_SQUAD_DLQ_URL=https://sqs.${AWS_REGION}.amazonaws.com/${AWS_ACCOUNT_ID}/agent-squad-dlq

# ------------------------------------------
# DynamoDB Tables
# ------------------------------------------
DYNAMODB_STATE_TABLE=t-developer-evolution-state
DYNAMODB_PATTERNS_TABLE=t-developer-patterns
DYNAMODB_METRICS_TABLE=t-developer-metrics
DYNAMODB_REGISTRY_TABLE=t-developer-agent-registry

# ------------------------------------------
# S3 Storage
# ------------------------------------------
S3_ARTIFACTS_BUCKET=t-developer-artifacts-${AWS_ACCOUNT_ID}
S3_CODE_BUCKET=t-developer-code-${AWS_ACCOUNT_ID}
S3_LOGS_BUCKET=t-developer-logs-${AWS_ACCOUNT_ID}
S3_PRESIGNED_URL_EXPIRY=3600

# ------------------------------------------
# Evolution Engine
# ------------------------------------------
EVOLUTION_MODE=enabled
AI_AUTONOMY_LEVEL=0.85
MAX_EVOLUTION_CYCLES=10
SELF_IMPROVEMENT_THRESHOLD=0.2
EVOLUTION_MAX_FILES_PER_CYCLE=10
EVOLUTION_MAX_CHANGES_PER_FILE=100
EVOLUTION_MIN_TEST_COVERAGE=85
EVOLUTION_MIN_SECURITY_SCORE=80
EVOLUTION_MAX_COMPLEXITY_INCREASE=5
EVOLUTION_SCHEDULE="0 3 * * *"

# ------------------------------------------
# Security
# ------------------------------------------
SANDBOX_ENABLED=true
WRITE_SCOPE_WHITELIST=packages/**,tests/**
DANGEROUS_COMMANDS_BLOCKED=true
SEMGREP_APP_TOKEN=
CODEQL_DATABASE_PATH=./codeql-db
OSV_API_ENDPOINT=https://api.osv.dev
SECRETS_MANAGER_PREFIX=t-developer/

# ------------------------------------------
# Docker Sandbox
# ------------------------------------------
DOCKER_CPU_LIMIT=1.0
DOCKER_MEMORY_LIMIT=512M
DOCKER_TIMEOUT_SECONDS=300
DOCKER_NETWORK_MODE=none
DOCKER_VOLUMES_READ=/workspace
DOCKER_VOLUMES_WRITE=/workspace/output

# ------------------------------------------
# Monitoring & Observability
# ------------------------------------------
LOG_LEVEL=INFO
ENABLE_TRACING=true
METRICS_ENABLED=true
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=${SERVICE_NAME}
CLOUDWATCH_LOG_GROUP=/aws/lambda/t-developer
CLOUDWATCH_METRICS_NAMESPACE=TDeveloper
ALERT_ERROR_RATE_THRESHOLD=5
ALERT_LATENCY_P99_THRESHOLD=5000

# ------------------------------------------
# API Configuration
# ------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_RATE_LIMIT_PER_MINUTE=60
API_AUTH_ENABLED=true

# ------------------------------------------
# Testing
# ------------------------------------------
TEST_PARALLEL_WORKERS=4
TEST_TIMEOUT_SECONDS=30
TEST_COVERAGE_THRESHOLD=85
HYPOTHESIS_MAX_EXAMPLES=100

# ------------------------------------------
# A2A Protocol Integration
# ------------------------------------------
A2A_REGISTRY_URL=https://registry.a2a.dev
A2A_AGENT_ID=t-developer-v2
A2A_DISCOVERY_ENABLED=true

# ------------------------------------------
# Feature Flags
# ------------------------------------------
FEATURE_AUTO_EVOLUTION=false
FEATURE_SECURITY_SCANNING=true
FEATURE_PERFORMANCE_MONITORING=true
FEATURE_A2A_INTEGRATION=false

# ------------------------------------------
# GitHub Configuration
# ------------------------------------------
GITHUB_OWNER=
GITHUB_REPO=
GITHUB_DEFAULT_BRANCH=main

# ------------------------------------------
# Cost Management
# ------------------------------------------
COST_BUDGET_MONTHLY_USD=1000
MAX_BEDROCK_REQUESTS_PER_DAY=10000