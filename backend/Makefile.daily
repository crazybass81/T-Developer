# T-Developer Daily Workflow Commands
# ì¼ì¼ ì‘ì—… ê²€ì¦ ë° ì™„ë£Œë¥¼ ìœ„í•œ Makefile

.PHONY: help
help:
	@echo "T-Developer Daily Workflow Commands"
	@echo "===================================="
	@echo "make day-validate DAY=3    # Day 3 ì‘ì—… ê²€ì¦"
	@echo "make day-complete DAY=3    # Day 3 ì‘ì—… ì™„ë£Œ (ê²€ì¦ + ë¬¸ì„œ + Git)"
	@echo "make day-report DAY=3      # Day 3 ë³´ê³ ì„œë§Œ ìƒì„±"
	@echo "make day-fix DAY=3         # Day 3 ë¯¸ì™„ë£Œ ì‘ì—… ìë™ ìˆ˜ì •"
	@echo "make current-day           # í˜„ì¬ ë‚ ì§œ ê¸°ì¤€ ì‘ì—… ê²€ì¦"
	@echo "make week-summary WEEK=1   # Week 1 ìš”ì•½ ìƒì„±"

# í˜„ì¬ ë‚ ì§œë¡œë¶€í„° Day ë²ˆí˜¸ ê³„ì‚°
CURRENT_DAY := $(shell echo $$(( ($$(date +%s) - $$(date -d '2024-11-14' +%s)) / 86400 + 1 )))

.PHONY: day-validate
day-validate:
	@if [ -z "$(DAY)" ]; then \
		echo "âŒ DAY íŒŒë¼ë¯¸í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆ: make day-validate DAY=3"; \
		exit 1; \
	fi
	@echo "ğŸ” Day $(DAY) ì‘ì—… ê²€ì¦ ì¤‘..."
	@python scripts/daily_workflow.py --day $(DAY) --skip-git

.PHONY: day-complete
day-complete:
	@if [ -z "$(DAY)" ]; then \
		echo "âŒ DAY íŒŒë¼ë¯¸í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆ: make day-complete DAY=3"; \
		exit 1; \
	fi
	@echo "ğŸš€ Day $(DAY) ì‘ì—… ì™„ë£Œ í”„ë¡œì„¸ìŠ¤ ì‹œì‘..."
	@python scripts/daily_workflow.py --day $(DAY) --auto-fix
	@echo "âœ… Day $(DAY) ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"

.PHONY: day-report
day-report:
	@if [ -z "$(DAY)" ]; then \
		echo "âŒ DAY íŒŒë¼ë¯¸í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆ: make day-report DAY=3"; \
		exit 1; \
	fi
	@echo "ğŸ“Š Day $(DAY) ë³´ê³ ì„œ ìƒì„± ì¤‘..."
	@python scripts/daily_workflow.py --day $(DAY) --skip-git --report-only

.PHONY: day-fix
day-fix:
	@if [ -z "$(DAY)" ]; then \
		echo "âŒ DAY íŒŒë¼ë¯¸í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆ: make day-fix DAY=3"; \
		exit 1; \
	fi
	@echo "ğŸ”§ Day $(DAY) ë¯¸ì™„ë£Œ ì‘ì—… ìˆ˜ì • ì¤‘..."
	@python scripts/daily_workflow.py --day $(DAY) --auto-fix --skip-git

.PHONY: current-day
current-day:
	@echo "ğŸ“… í˜„ì¬ Day: $(CURRENT_DAY)"
	@echo "ğŸš€ Day $(CURRENT_DAY) ì‘ì—… ê²€ì¦ ì‹œì‘..."
	@python scripts/daily_workflow.py --day $(CURRENT_DAY) --auto-fix

.PHONY: week-summary
week-summary:
	@if [ -z "$(WEEK)" ]; then \
		echo "âŒ WEEK íŒŒë¼ë¯¸í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆ: make week-summary WEEK=1"; \
		exit 1; \
	fi
	@echo "ğŸ“ˆ Week $(WEEK) ìš”ì•½ ìƒì„± ì¤‘..."
	@python scripts/generate_week_summary.py --week $(WEEK)

# Day 3 ì „ìš© ëª…ë ¹ì–´ (í˜„ì¬ ì‘ì—…)
.PHONY: day3-meta-agents
day3-meta-agents:
	@echo "ğŸ¤– Day 3: Meta Agents êµ¬í˜„ ì‹œì‘..."
	@echo "1. Agent Registry ì‹œìŠ¤í…œ êµ¬í˜„"
	@echo "2. 6.5KB ë©”ëª¨ë¦¬ ê²€ì¦ êµ¬í˜„"
	@echo "3. 3Î¼s ì†ë„ ë²¤ì¹˜ë§ˆí‚¹ ì„¤ì •"
	@echo "4. ì í•©ë„ ì¶”ì  ì´ˆê¸°í™”"
	@python scripts/implement_day3_meta_agents.py
	@make day-complete DAY=3

# Evolution ì•ˆì „ ê²€ì‚¬
.PHONY: evolution-safety-check
evolution-safety-check:
	@echo "ğŸ›¡ï¸ Evolution Safety ê²€ì‚¬ ì¤‘..."
	@python src/evolution/safety.py --check
	@echo "âœ… Evolution Safety ê²€ì‚¬ ì™„ë£Œ"

# ì§„í–‰ ìƒí™© ëŒ€ì‹œë³´ë“œ
.PHONY: dashboard
dashboard:
	@echo "ğŸ“Š T-Developer Progress Dashboard"
	@echo "================================="
	@python scripts/show_dashboard.py

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ì¼ì¼ ì‘ì—… ê²€ì¦ í¬í•¨)
.PHONY: test-daily
test-daily:
	@echo "ğŸ§ª ì¼ì¼ ì‘ì—… í…ŒìŠ¤íŠ¸ ì‹¤í–‰..."
	@pytest tests/daily/ -v --tb=short
	@echo "âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ"

# ë¬¸ì„œ ìë™ ìƒì„±
.PHONY: docs-generate
docs-generate:
	@echo "ğŸ“ ë¬¸ì„œ ìë™ ìƒì„± ì¤‘..."
	@python scripts/generate_docs.py
	@echo "âœ… ë¬¸ì„œ ìƒì„± ì™„ë£Œ"

# ì „ì²´ í”„ë¡œì íŠ¸ ìƒíƒœ í™•ì¸
.PHONY: status
status:
	@echo "ğŸ“Š í”„ë¡œì íŠ¸ ìƒíƒœ"
	@echo "==============="
	@echo "í˜„ì¬ Day: $(CURRENT_DAY) / 80"
	@echo "í˜„ì¬ Phase: $$(( ($(CURRENT_DAY) - 1) / 20 + 1 ))"
	@echo ""
	@git status --short
	@echo ""
	@echo "ìµœê·¼ ì»¤ë°‹:"
	@git log --oneline -5
	@echo ""
	@echo "ë¸Œëœì¹˜: $$(git branch --show-current)"

# í´ë¦°ì—…
.PHONY: clean-reports
clean-reports:
	@echo "ğŸ§¹ ë³´ê³ ì„œ ì •ë¦¬ ì¤‘..."
	@rm -f ../docs/00_planning/reports/*.json
	@rm -f ../docs/00_planning/progress/*.md
	@echo "âœ… ì •ë¦¬ ì™„ë£Œ"